# 部署检查清单

使用此清单确保完整部署所有组件。

## 📦 部署前准备

### 服务器准备
- [ ] 已购买腾讯云服务器
- [ ] 服务器配置满足最低要求（2核4GB）
- [ ] 已获取服务器公网IP
- [ ] 已获取root密码或SSH密钥
- [ ] 已配置安全组（开放必要端口）

### 本地环境
- [ ] 已安装SSH客户端（PuTTY/WinSCP/终端）
- [ ] 已准备好项目代码文件
- [ ] 已准备好模型文件

---

## 🚀 部署步骤

### 第一步：服务器连接
- [ ] 成功SSH连接到服务器
- [ ] 可以执行命令
- [ ] 网络连接正常

### 第二步：代码上传
- [ ] 代码已上传到服务器 `/opt/plant-disease-microservices`
- [ ] 文件完整性检查通过
- [ ] 文件权限正确

### 第三步：环境配置
- [ ] 运行了 `deploy_tencent_cloud.sh` 脚本
- [ ] Docker安装成功
- [ ] Docker Compose安装成功
- [ ] 防火墙配置完成

### 第四步：一键部署
- [ ] 运行了 `one_click_deploy.sh` 脚本
- [ ] 所有Docker镜像构建成功
- [ ] 所有服务启动成功

### 第五步：环境变量
- [ ] 编辑了 `.env` 文件
- [ ] 修改了数据库密码
- [ ] 修改了JWT密钥
- [ ] 配置了腾讯云COS（如需要）

### 第六步：模型上传
- [ ] 模型文件已上传到 `/opt/plant-disease/models/`
- [ ] 创建了模型配置文件（如需要）
- [ ] 模型文件权限正确
- [ ] 模型服务重启并加载模型

---

## ✅ 功能验证

### 服务检查
- [ ] API网关服务运行正常
- [ ] 模型服务运行正常
- [ ] 任务服务运行正常
- [ ] 缓存服务运行正常
- [ ] 前端服务运行正常
- [ ] 数据库服务运行正常
- [ ] Redis服务运行正常

### API测试
- [ ] 健康检查API正常：`http://服务器IP:8000/health/`
- [ ] 模型列表API正常：`http://服务器IP:8000/api/models/`
- [ ] API文档可访问：`http://服务器IP:8000/docs`

### 前端测试
- [ ] 前端页面可访问：`http://服务器IP`
- [ ] 可以上传图片
- [ ] 可以执行检测
- [ ] 检测结果正常显示

### 模型测试
- [ ] 模型已成功加载（查看日志确认）
- [ ] 可以使用默认模型进行预测
- [ ] 可以使用集成模型进行预测（如配置）
- [ ] 可以使用蒸馏模型进行预测（如配置）

---

## 🔧 ESP32设备（如使用）

### 硬件准备
- [ ] ESP32开发板已准备
- [ ] OV2640摄像头模块已连接
- [ ] USB数据线已准备

### 软件配置
- [ ] Arduino IDE已安装
- [ ] ESP32支持包已安装
- [ ] 必要库已安装（ArduinoJson等）

### 代码配置
- [ ] WiFi名称和密码已配置
- [ ] 服务器IP地址已配置
- [ ] API路径已配置
- [ ] 摄像头引脚已配置（如需要）

### 上传和测试
- [ ] 代码已成功上传到ESP32
- [ ] ESP32可以连接WiFi
- [ ] ESP32可以连接服务器
- [ ] 可以采集和上传图像
- [ ] 可以接收检测结果

---

## 🔒 安全配置

### 基础安全
- [ ] 已修改默认数据库密码
- [ ] 已修改JWT密钥
- [ ] 已配置防火墙规则
- [ ] 已禁用不必要的端口

### 高级安全（可选）
- [ ] 已配置HTTPS（使用正式SSL证书）
- [ ] 已配置API认证
- [ ] 已配置访问限制
- [ ] 已设置定期备份

---

## 📊 监控和日志

### 监控配置
- [ ] Prometheus运行正常
- [ ] Grafana运行正常
- [ ] 可以访问监控面板

### 日志配置
- [ ] 日志目录已创建
- [ ] 日志可以正常写入
- [ ] 日志轮转已配置

---

## 🆘 故障排除

### 常见问题
- [ ] 已阅读故障排除文档
- [ ] 知道如何查看日志
- [ ] 知道如何重启服务
- [ ] 知道如何检查服务状态

---

## 📝 文档和记录

### 信息记录
- [ ] 已记录服务器IP地址
- [ ] 已记录所有密码和密钥
- [ ] 已记录配置信息
- [ ] 已保存部署日志

---

## ✨ 部署完成

当所有项目都打勾后，您的系统应该已经完全部署并可以正常使用了！

**部署日期：** _______________

**部署人员：** _______________

**备注：** _______________

